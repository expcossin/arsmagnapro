(window.webpackJsonp=window.webpackJsonp||[]).push([[7,2,5],{235:function(e,t,n){var content=n(237);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(87).default)("2b7ba6d2",content,!0,{sourceMap:!1})},236:function(e,t,n){"use strict";n(235)},237:function(e,t,n){var r=n(86)(!1);r.push([e.i,".response[data-v-0330da15]{margin:20px 10px;background-color:#316745;color:#fff}.response-body[data-v-0330da15]{margin:5px 0 10px}.response-content[data-v-0330da15]{white-space:pre}*[data-v-0330da15] a{color:#add6ff}.meta[data-v-0330da15]{font-size:12px;color:gold}.note[data-v-0330da15]{padding:5px 10px;color:#232323;background:#fff8e8;border-left:10px solid #ffc06e;max-width:400px}",""]),e.exports=r},239:function(e,t,n){"use strict";n.r(t);n(34),n(171);var r={props:{response:Object,isPreview:{default:!1}},data:function(){return{isHidden:!0}},computed:{datetime:function(){if(this.isPreview)return"year/month/date h:m:s";var e=new Date(this.response.datetime);return e.getFullYear()+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},number:function(){return this.isPreview?this.response.number||"n":this.response.number},display:function(){return!this.response.options.hideContent||!this.isHidden}},mounted:function(){var html=this.$refs.content.innerHTML;this.response.options.disableMath||(html=this.$renderer.katex(html)),this.$refs.content.innerHTML=this.$renderer.basic(html),html=this.$refs.explanation.innerHTML,html=this.$renderer.katex(html,!1),this.$refs.explanation.innerHTML=this.$renderer.basic(html)}},o=(n(236),n(42)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"response",attrs:{id:e.number}},[n("div",{staticClass:"meta"},[n("span",{staticClass:"number"},[e._v(e._s(e.number))]),e._v(" "),e.response.options.writeName?n("span",{staticClass:"name"},[e._v(e._s(e.response.name))]):e._e(),e._v(" "),n("span",{staticClass:"datetime"},[e._v(e._s(e.datetime))])]),e._v(" "),n("div",{staticClass:"response-body"},[n("div",{ref:"explanation",staticClass:"explanation"},[e._v(e._s(e.response.explanation))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],ref:"content",staticClass:"response-content"},[e._v(e._s(e.response.content))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.display,expression:"!display"}],staticClass:"note"},[n("p",[e._v("投稿者によって非表示に設定されています。")]),e._v(" "),n("button",{on:{click:function(t){e.isHidden=!1}}},[e._v("表示する")])])])])}),[],!1,null,"0330da15",null);t.default=component.exports},243:function(e,t,n){var content=n(246);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(87).default)("461d5e7e",content,!0,{sourceMap:!1})},245:function(e,t,n){"use strict";n(243)},246:function(e,t,n){var r=n(86)(!1);r.push([e.i,".preview[data-v-3941a4a8]{white-space:pre}",""]),e.exports=r},249:function(e,t,n){"use strict";n.r(t);var r={props:["content"],mounted:function(){this.$refs.content.innerHTML=this.$renderer.katex(this.$refs.content.innerHTML,!1)}},o=(n(245),n(42)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"content",staticClass:"preview"},[e._v(e._s(e.content||""))])}),[],!1,null,"3941a4a8",null);t.default=component.exports},250:function(e,t,n){var content=n(255);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(87).default)("3f79f2b8",content,!0,{sourceMap:!1})},254:function(e,t,n){"use strict";n(250)},255:function(e,t,n){var r=n(86)(!1);r.push([e.i,"#top-nav[data-v-717ff5a2]{top:0;height:30px;width:100%;border-bottom:1px solid}h1[data-v-717ff5a2]{text-align:center;font-size:20px}.container[data-v-717ff5a2]{max-width:800px;margin:auto}.row[data-v-717ff5a2]{display:flex}.col1[data-v-717ff5a2]{width:30%;text-align:center}.col2[data-v-717ff5a2]{width:70%}#form-content[data-v-717ff5a2]{min-width:400px;min-height:100px}#postThread[data-v-717ff5a2]{display:block;margin:auto}.error[data-v-717ff5a2]{color:red}.errorBox[data-v-717ff5a2]{margin:auto;max-width:400px}.charCount[data-v-717ff5a2]{margin-top:15px}.sendingMessage[data-v-717ff5a2]{text-align:center}",""]),e.exports=r},262:function(e,t,n){"use strict";n.r(t);var r=n(5),o=(n(35),n(36),n(52),n(64),n(43),n(53),n(249)),c=(n(171),{components:{TitlePreview:o.default},data:function(){return{title:"",type:"",board:"",boards:[{name:"数学",id:"math"},{name:"物理学",id:"physics"},{name:"その他",id:"others"}],errors:[],displayErrors:!1,titleKey:!0,responseKey:!0,isSending:!1,responseData:{number:1,name:"",content:"",options:{writeName:!1,disableMath:!1,hideContent:!1}}}},methods:{createThread:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkForm()){t.next=18;break}if(e.isSending=!0,"primary"!=e.type&&"secondary"!=e.type){t.next=10;break}return t.next=5,e.$axios.post("https://private-api2140942232.azurewebsites.net/api/threads",{title:e.title,board:e.board,name:e.responseData.name,content:e.responseData.content,options:e.responseData.options,type:e.type});case 5:n=t.sent,e.isSending=!1,200===n.status?e.$router.push("/".concat(e.board,"/").concat(n.data)):alert("投稿できませんでした。"),t.next=16;break;case 10:if("nora"!=e.type){t.next=16;break}return t.next=13,e.$nora.createThread({title:e.title,name:e.responseData.name,content:e.responseData.content,options:e.responseData.options});case 13:r=t.sent,e.isSending=!1,200===r.status?e.$router.push("/nora/".concat(r.data)):alert("投稿できませんでした。");case 16:t.next=19;break;case 18:e.displayErrors=!0;case 19:case"end":return t.stop()}}),t)})))()},checkForm:function(){if(this.errors=[],["primary","secondary","nora"].includes(this.type)||this.errors.push("種類が必要です。"),this.responseData.options.writeName&&this.responseData.name.length>20&&this.error.push("名前が長すぎます。"),0==this.title.replace(/\s+/g,"").length&&this.errors.push("タイトルが必要です。"),this.title.length>201&&this.errors.push("タイトルが長すぎます。"),0==this.responseData.content.replace(/\s+/g,"").length&&this.errors.push("本文が必要です。"),this.responseData.content.length>1001&&this.errors.push("本文が長すぎます。"),"primary"!=this.type&&"secondary"!=this.type||""==this.board&&this.errors.push("カテゴリが必要です。"),0==this.errors.length)return!0}},watch:{title:function(){this.titleKey=!this.titleKey},responseData:{handler:function(){this.responseKey=!this.responseKey},deep:!0}}}),l=(n(254),n(42)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("div",[n("h1",[e._v("スレッドの作成")]),e._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[e._m(0),e._v(" "),n("div",{staticClass:"col2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:"top",value:"primary"},domProps:{checked:e._q(e.type,"primary")},on:{change:function(t){e.type="primary"}}}),e._v(" "),n("label",{attrs:{for:"top"}},[e._v("上: 作成にレベル3、書き込みにレベル2が必要。")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:"bottom",value:"secondary"},domProps:{checked:e._q(e.type,"secondary")},on:{change:function(t){e.type="secondary"}}}),e._v(" "),n("label",{attrs:{for:"bottom"}},[e._v("下: 作成にレベル2、書き込みにログインが必要。")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:"nora",value:"nora"},domProps:{checked:e._q(e.type,"nora")},on:{change:function(t){e.type="nora"}}}),e._v(" "),n("label",{attrs:{for:"nora"}},[e._v("野良: ログイン不要。板に載らない。処理が遅い。")]),e._v(" "),n("br")])]),e._v(" "),"primary"==e.type||"secondary"==e.type?n("div",{staticClass:"row"},[e._m(1),e._v(" "),n("div",{staticClass:"col2"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.board,expression:"board"}],attrs:{id:"form-board"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.board=t.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("カテゴリを選択")]),e._v(" "),e._l(e.boards,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)])]):e._e(),e._v(" "),n("div",{staticClass:"row"},[e._m(2),e._v(" "),n("div",{staticClass:"col2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{id:"form-title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col1"},[n("label",{attrs:{for:"form-content"}},[e._v("最初の書き込み")]),e._v(" "),n("div",{staticClass:"charCount"},[e._v(e._s(e.responseData.content.length)+"/1000")])]),e._v(" "),n("div",{staticClass:"col2"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.responseData.content,expression:"responseData.content"}],attrs:{id:"form-content"},domProps:{value:e.responseData.content},on:{input:function(t){t.target.composing||e.$set(e.responseData,"content",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"row"},[e._m(3),e._v(" "),n("div",{staticClass:"col2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.responseData.options.writeName,expression:"responseData.options.writeName"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.responseData.options.writeName)?e._i(e.responseData.options.writeName,null)>-1:e.responseData.options.writeName},on:{change:function(t){var n=e.responseData.options.writeName,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&e.$set(e.responseData.options,"writeName",n.concat([null])):c>-1&&e.$set(e.responseData.options,"writeName",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.responseData.options,"writeName",o)}}}),n("span",[e._v("名乗る")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.responseData.options.hideContent,expression:"responseData.options.hideContent"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.responseData.options.hideContent)?e._i(e.responseData.options.hideContent,null)>-1:e.responseData.options.hideContent},on:{change:function(t){var n=e.responseData.options.hideContent,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&e.$set(e.responseData.options,"hideContent",n.concat([null])):c>-1&&e.$set(e.responseData.options,"hideContent",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.responseData.options,"hideContent",o)}}}),n("span",[e._v("隠す")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.responseData.options.disableMath,expression:"responseData.options.disableMath"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.responseData.options.disableMath)?e._i(e.responseData.options.disableMath,null)>-1:e.responseData.options.disableMath},on:{change:function(t){var n=e.responseData.options.disableMath,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&e.$set(e.responseData.options,"disableMath",n.concat([null])):c>-1&&e.$set(e.responseData.options,"disableMath",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.responseData.options,"disableMath",o)}}}),n("span",[e._v("数式を変換しない")])])]),e._v(" "),e.responseData.options.writeName?n("div",{staticClass:"row"},[e._m(4),e._v(" "),n("div",{staticClass:"col2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.responseData.name,expression:"responseData.name"}],attrs:{id:"form-title"},domProps:{value:e.responseData.name},on:{input:function(t){t.target.composing||e.$set(e.responseData,"name",t.target.value)}}})])]):e._e(),e._v(" "),n("div",{staticClass:"row"},[e._m(5),e._v(" "),n("div",{staticClass:"col2"},[n("title-preview",{key:"titleKey:"+e.titleKey,attrs:{content:e.title}}),e._v(" "),n("response",{key:"contentKey: "+e.responseKey,attrs:{response:e.responseData,isPreview:!0}})],1)]),e._v(" "),e.displayErrors?n("div",{staticClass:"errorBox"},[n("p",{staticClass:"error"},[e._v(e._s(e.errors.length)+"つのエラー")]),e._v(" "),n("ol",e._l(e.errors,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),e.isSending?n("p",{staticClass:"sendingMessage"},[e._v("送信中...")]):n("button",{attrs:{id:"postThread"},on:{click:e.createThread}},[e._v("送信")])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("label",[e._v("種類")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("label",{attrs:{for:"form-board"}},[e._v("カテゴリ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("label",{attrs:{for:"form-title"}},[e._v("題名")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("label",{attrs:{for:"form-name"}},[e._v("オプション")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("label",{attrs:{for:"form-title"}},[e._v("名前")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col1"},[n("p",[e._v("プレビュー")])])}],!1,null,"717ff5a2",null);t.default=component.exports;installComponents(component,{TitlePreview:n(249).default,Response:n(239).default})}}]);