(window.webpackJsonp=window.webpackJsonp||[]).push([[6,2,3],{235:function(e,t,r){var content=r(237);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(87).default)("2b7ba6d2",content,!0,{sourceMap:!1})},236:function(e,t,r){"use strict";r(235)},237:function(e,t,r){var n=r(86)(!1);n.push([e.i,".response[data-v-0330da15]{margin:20px 10px;background-color:#316745;color:#fff}.response-body[data-v-0330da15]{margin:5px 0 10px}.response-content[data-v-0330da15]{white-space:pre}*[data-v-0330da15] a{color:#add6ff}.meta[data-v-0330da15]{font-size:12px;color:gold}.note[data-v-0330da15]{padding:5px 10px;color:#232323;background:#fff8e8;border-left:10px solid #ffc06e;max-width:400px}",""]),e.exports=n},238:function(e,t,r){var content=r(241);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(87).default)("ae32f354",content,!0,{sourceMap:!1})},239:function(e,t,r){"use strict";r.r(t);r(34),r(171);var n={props:{response:Object,isPreview:{default:!1}},data:function(){return{isHidden:!0}},computed:{datetime:function(){if(this.isPreview)return"year/month/date h:m:s";var e=new Date(this.response.datetime);return e.getFullYear()+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},number:function(){return this.isPreview?this.response.number||"n":this.response.number},display:function(){return!this.response.options.hideContent||!this.isHidden}},mounted:function(){var html=this.$refs.content.innerHTML;this.response.options.disableMath||(html=this.$renderer.katex(html)),this.$refs.content.innerHTML=this.$renderer.basic(html),html=this.$refs.explanation.innerHTML,html=this.$renderer.katex(html,!1),this.$refs.explanation.innerHTML=this.$renderer.basic(html)}},o=(r(236),r(42)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"response",attrs:{id:e.number}},[r("div",{staticClass:"meta"},[r("span",{staticClass:"number"},[e._v(e._s(e.number))]),e._v(" "),e.response.options.writeName?r("span",{staticClass:"name"},[e._v(e._s(e.response.name))]):e._e(),e._v(" "),r("span",{staticClass:"datetime"},[e._v(e._s(e.datetime))])]),e._v(" "),r("div",{staticClass:"response-body"},[r("div",{ref:"explanation",staticClass:"explanation"},[e._v(e._s(e.response.explanation))]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],ref:"content",staticClass:"response-content"},[e._v(e._s(e.response.content))]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.display,expression:"!display"}],staticClass:"note"},[r("p",[e._v("投稿者によって非表示に設定されています。")]),e._v(" "),r("button",{on:{click:function(t){e.isHidden=!1}}},[e._v("表示する")])])])])}),[],!1,null,"0330da15",null);t.default=component.exports},240:function(e,t,r){"use strict";r(238)},241:function(e,t,r){var n=r(86)(!1);n.push([e.i,'#top-nav[data-v-437ee838]{top:0;height:30px;width:100%;padding:0 10px;border-bottom:1px solid;position:fixed;display:flex;background-color:#ffffea;color:#000;z-index:2}#top-nav #danwaTitle a[data-v-437ee838]{color:inherit;text-decoration:none}#top-nav .divider[data-v-437ee838]{margin-left:auto}#top-nav div+div[data-v-437ee838]{margin-left:10px}#loginButton[data-v-437ee838]{cursor:pointer}#top-nav .createThread a[data-v-437ee838]{color:inherit;text-decoration:none}#top-nav .createThread[data-v-437ee838]{margin-left:auto;margin-right:10px;display:block}.bottom[data-v-437ee838]{background-color:#cbb994}.bottom .line[data-v-437ee838]{background-color:#000;color:#fff}#preview-wrapper[data-v-437ee838]{background-color:#f8f4e6}#preview-container[data-v-437ee838]{padding:10px;max-width:800px;margin:auto;background-color:#316745;border-left:3px solid silver;border-right:3px solid silver}#preview-container .response[data-v-437ee838]{margin-top:0;margin-bottom:0}#form[data-v-437ee838]{margin:auto;padding-top:10px;max-width:800px;padding-left:10px}#thread-header[data-v-437ee838]{text-align:center;color:#fff}#threadTitle[data-v-437ee838]{font-size:30px;font-family:"Noto Serif JP",serif;margin:10px 30px;border-bottom:1px solid;padding-bottom:10px}#thread-container[data-v-437ee838]{padding:10px;max-width:800px;margin:auto;overflow:scroll;height:100%;background-color:#316745;border:3px solid silver}#thread-wrapper[data-v-437ee838]{padding-top:30px;background-color:#ffffef;height:90vh}#preview[data-v-437ee838]{white-space:pre}#form-content[data-v-437ee838]{min-width:400px;min-height:80px}#form-explanation[data-v-437ee838]{min-width:350px}',""]),e.exports=n},242:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(35),r(34),r(43),r(53),r(52),r(36),r(41)),c={head:{meta:[{hid:"robots",name:"robots",content:"nofollow"}]},props:["id","type","title","responses","topbarConf","boardId"],data:function(){return{formData:{name:"",content:"",options:{writeName:!1,disableMath:!1,hideContent:!1},explanation:""},currentPage:0,formKey:!0,isSending:!1,displayErrors:!1,errors:[],hash:"",lastPage:0}},mounted:function(){this.$refs.title.innerHTML=this.$renderer.katex(this.$refs.title.innerHTML);var s=this.$route.hash;if(""==s)this.hash=s;else{var e=s.slice(1);this.currentPage=e,this.hash=e}window.scrollTo(0,0)},methods:{sendResponse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkForm()){t.next=21;break}if("nora"===e.type){t.next=11;break}if(0===e.formData.content.replace(/\s+/g,"").length){t.next=9;break}return e.isSending=!0,t.next=6,o.post("https://private-api2140942232.azurewebsites.net/api/boards/".concat(e.boardId,"/threads/").concat(e.id,"/responses"),{name:e.formData.name,content:e.formData.content,options:e.formData.options,explanation:e.formData.explanation});case 6:r=t.sent,e.isSending=!1,200===r.status?(e.formData={name:"",content:"",options:{writeName:!1,disableMath:!1,hideContent:!1}},e.$emit("posted")):alert("投稿に失敗しました。");case 9:t.next=19;break;case 11:if("nora"!==e.type){t.next=19;break}if(0===e.formData.content.replace(/\s+/g,"").length){t.next=19;break}return e.isSending=!0,t.next=16,e.$nora.createResponse(e.id,{name:e.formData.name,content:e.formData.content,options:e.formData.options});case 16:n=t.sent,e.isSending=!1,200===n.status&&(e.formData={name:"",content:"",options:{writeName:!1,disableMath:!1,hideContent:!1}},e.$emit("posted"));case 19:t.next=22;break;case 21:e.displayErrors=!0;case 22:case"end":return t.stop()}}),t)})))()},checkForm:function(){if(this.errors=[],this.formData.options.writeName&&this.formData.name.length>20&&this.errors.push("名前が長すぎます。"),0==this.formData.content.replace(/\s+/g,"").length&&this.errors.push("本文が必要です。"),this.formData.content.length>1001&&this.errors.push("本文が長すぎます。"),0==this.errors.length)return!0},pageName:function(e){return 100*(e+1)<this.resCount+1?"".concat(100*e+1,"-").concat(100*(e+1)):"".concat(100*e+1,"-").concat(this.resCount)}},computed:{resCount:function(){return this.responses.length},pages:function(){for(var e=[],i=0;i<Math.floor((this.resCount-1)/100)+1;i++)e.push(this.responses.slice(100*i,100*(i+1)));return e},displayedResponses:function(){if("latest"==this.currentPage){var e=this.resCount,t=e%100,p=(e-t)/100;return t>49?this.pages[p].slice(t-50):0==p?this.pages[0]:this.pages[p-1].slice(50+t).concat(this.pages[p])}return this.pages[this.currentPage]}},watch:{formData:{handler:function(){this.formKey=!this.formKey},deep:!0},currentPage:function(e,t){"latest"!=e&&"number"!=typeof e||this.$router.push(this.$route.path),this.lastPage=t},$route:{handler:function(){var s=this.$route.hash;if(""==s)this.hash=s,this.currentPage=this.lastPage;else{var e=s.slice(1);this.currentPage=e,this.hash=e}},deep:!0}}},d=(r(240),r(42)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"container"}},[r("div",{attrs:{id:"top-nav"}},[r("div",{attrs:{id:"danwaTitle"}},[r("nuxt-link",{attrs:{to:e.topbarConf.link}},[e._v(e._s(e.topbarConf.title))])],1),e._v(" "),r("div",{staticClass:"divider"}),e._v(" "),r("div",{attrs:{id:"pageSelect"}},[r("span",[e._v("表示: ")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.currentPage,expression:"currentPage"}],attrs:{id:"form-board"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.currentPage=t.target.multiple?r:r[0]}}},[""!==e.hash?r("option",[e._v(e._s(e.hash))]):e._e(),e._v(" "),r("option",{attrs:{value:"latest"}},[e._v("最新50")]),e._v(" "),e._l(e.pages,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(e.pageName(n)))])}))],2)]),e._v(" "),r("div",{attrs:{id:"loginButton"},on:{click:e.$auth.loginPopup}},[e._v("ログイン")])]),e._v(" "),r("div",{attrs:{id:"thread-wrapper"}},[r("div",{attrs:{id:"thread-container"}},[r("header",{attrs:{id:"thread-header"}},[r("h1",{ref:"title",attrs:{id:"threadTitle"}},[e._v(e._s(e.title))])]),e._v(" "),""==e.hash?r("div",e._l(e.displayedResponses,(function(e){return r("response",{key:e.number,attrs:{response:e}})})),1):r("div",[r("response",{attrs:{response:e.responses.find((function(t){return t.number==e.hash}))}})],1)])]),e._v(" "),r("div",{staticClass:"bottom"},[0!==e.formData.content.length?[r("hr"),e._v(" "),r("div",{attrs:{id:"preview-wrapper"}},[r("div",{attrs:{id:"preview-container"}},[r("response",{key:"formKey: "+e.formKey,attrs:{response:e.formData,isPreview:!0}})],1)])]:e._e(),e._v(" "),e._m(0),e._v(" "),r("div",{attrs:{id:"form"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col1"},[r("label",{attrs:{for:"form-content"}},[e._v("本文")]),e._v(" "),r("span",{staticClass:"charCount"},[e._v("("+e._s(e.formData.content.length)+"/1000)")])]),e._v(" "),r("div",{staticClass:"col2"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.content,expression:"formData.content"}],attrs:{id:"form-content"},domProps:{value:e.formData.content},on:{input:function(t){t.target.composing||e.$set(e.formData,"content",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"row"},[e._m(1),e._v(" "),r("div",{staticClass:"col2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.options.writeName,expression:"formData.options.writeName"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.formData.options.writeName)?e._i(e.formData.options.writeName,null)>-1:e.formData.options.writeName},on:{change:function(t){var r=e.formData.options.writeName,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&e.$set(e.formData.options,"writeName",r.concat([null])):c>-1&&e.$set(e.formData.options,"writeName",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.formData.options,"writeName",o)}}}),r("span",[e._v("名乗る")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.options.hideContent,expression:"formData.options.hideContent"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.formData.options.hideContent)?e._i(e.formData.options.hideContent,null)>-1:e.formData.options.hideContent},on:{change:function(t){var r=e.formData.options.hideContent,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&e.$set(e.formData.options,"hideContent",r.concat([null])):c>-1&&e.$set(e.formData.options,"hideContent",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.formData.options,"hideContent",o)}}}),r("span",[e._v("隠す")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.options.disableMath,expression:"formData.options.disableMath"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.formData.options.disableMath)?e._i(e.formData.options.disableMath,null)>-1:e.formData.options.disableMath},on:{change:function(t){var r=e.formData.options.disableMath,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&e.$set(e.formData.options,"disableMath",r.concat([null])):c>-1&&e.$set(e.formData.options,"disableMath",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.formData.options,"disableMath",o)}}}),r("span",[e._v("数式を変換しない")])])]),e._v(" "),e.formData.options.writeName?r("div",{staticClass:"row"},[r("div",{staticClass:"col1"},[r("label",{attrs:{for:"form-name"}},[e._v("名前")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],attrs:{id:"form-name"},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})])]):e._e(),e._v(" "),e.formData.options.hideContent?r("div",{staticClass:"row"},[r("div",{staticClass:"col1"},[r("label",{attrs:{for:"form-explanation"}},[e._v("一言")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.explanation,expression:"formData.explanation"}],attrs:{id:"form-explanation"},domProps:{value:e.formData.explanation},on:{input:function(t){t.target.composing||e.$set(e.formData,"explanation",t.target.value)}}})])]):e._e(),e._v(" "),e.displayErrors?r("div",{staticClass:"errorBox"},[r("p",{staticClass:"error"},[e._v(e._s(e.errors.length)+"つのエラー")]),e._v(" "),r("ol",e._l(e.errors,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),e.isSending?r("p",{staticClass:"sendingMessage"},[e._v("送信中...")]):r("button",{on:{click:e.sendResponse}},[e._v("送信")])])],2)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"line"},[r("p",[e._v("返信")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col1"},[r("p",[e._v("オプション")])])}],!1,null,"437ee838",null);t.default=component.exports;installComponents(component,{Response:r(239).default})},267:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(35),r(52),{data:function(){return{id:this.$route.params.threadId}},layout:"nasi",asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,title,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("https://public-api281230237482.azurewebsites.net/api/boards/".concat(e.route.params.boardId,"/threads/").concat(e.route.params.threadId));case 2:return r=t.sent,n=r.data.responses,title=r.data.meta.title,o=r.data.meta.type,t.abrupt("return",{title:title,responses:n,type:o});case 7:case"end":return t.stop()}}),t)})))()},methods:{update:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("https://public-api281230237482.azurewebsites.net/api/boards/".concat(e.$route.params.boardId,"/threads/").concat(e.$route.params.threadId));case 2:r=t.sent,e.responses=r.data.responses;case 4:case"end":return t.stop()}}),t)})))()}}}),c=r(42),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("thread",{attrs:{id:e.id,title:e.title,responses:e.responses,type:e.type},on:{posted:e.update}})}),[],!1,null,"19aba986",null);t.default=component.exports;installComponents(component,{Thread:r(242).default})}}]);